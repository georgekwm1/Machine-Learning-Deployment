{% extends 'layout.html' %}

{% block title %}Predict - Predictify{% endblock %}

{% block content %}

<div class="container">
    <!-- File upload -->
    <section class="file-upload p-3 p-lg-5 upload border-bottom">
        <form action="/predict" method="post" enctype="multipart/form-data">
            <button class="file-upload-btn" type="button"
                onclick="$('.file-upload-input').click()">Add A File</button>

            <div class="image-upload-wrap">
                <input class="file-upload-input" type='file'
                    onchange="readURL(this);" accept="file/*"
                    name="pred_file" />
                <div class="drag-text">
                    <h3>Drag and drop a file</h3>
                </div>
            </div>
            <button class="file-predict-btn" type="submit">Predict</button>
            <div class="file-upload-content">
                <div class="uploaded uploaded--one">
                    <i class="far fa-file-pdf"></i>
                    <div class="file">
                        <div class="file__name">
                            <p id="file-preview"></p>
                            <i class="fas fa-times mx-4"
                                onclick="removeUpload()"></i>
                        </div>
                        <div class="progress">
                            <div
                                class="progress-bar bg-primary progress-bar-animated"
                                style="width:100%">100%</div>
                        </div>
                    </div>
                </div>

            </form>
        </div>
    </section>

    <!-- PREDICTION OUTPUT -->

    <section class="output mt-5">
        <h4 class="label mb-4">Response</h4>
        <textarea name id class="100%" cols="30" rows="10" disabled>
        {% if prediction|length == 0 %}
        <h1>Please upload a file first</h1>
        {% elif prediction.any() %}
            <ul>
                {% for item in prediction %}
                    <li>{{ item }}</li>
                {% endfor %}
            </ul>
        {% else %}
            <h1>No predictions available</h1>
        {% endif %}
      </textarea>
        {% if download_link %}
        <a href="{{ download_link }}">Download Predictions</a>
        {% endif %}
    </section>
</div>

{% endblock %}